<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gamish Chat</title>
  <style>
    :root{
      --bg: #ffffff;
      --card: #f3f4f6;
      --ink: #111827; /* text */
      --muted: #6b7280; /* secondary text */
      --border: #e5e7eb; /* light border */
      --bubble-me: #e5e7eb; /* light grey */
      --bubble-them: #ffffff; /* white */
    }
    *{box-sizing:border-box}
    body{
      margin:0; background: var(--bg); color: var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans";
      min-height:100svh; display:grid; place-items:center; padding:clamp(16px,3vw,48px);
    }

    .chat-wrap{ width:min(92vw, 880px); display:grid; place-items:center; }

    .chat-card{
      width:min(92vw, 520px); max-height:80svh;
      background: linear-gradient(180deg, #fafafa 0%, var(--card) 100%);
      border-radius:20px; overflow:hidden; position:relative;
      box-shadow: 0 12px 32px rgba(0,0,0,.08), inset 0 0 0 2px var(--border);
    }

    .header{
      position:sticky; top:0; z-index:2; display:flex; align-items:center; justify-content:space-between;
      padding:12px 14px; background:#ffffff; border-bottom:2px solid var(--border);
    }
    .tab{
      display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:12px; background:#fff; border:2px solid var(--border);
    }
    .avatar{
      width:28px; height:28px; border-radius:6px; background:#e5e7eb; display:inline-grid; place-items:center; color:#374151; font-weight:700; font-size:13px;
      box-shadow: inset 0 0 0 2px #d1d5db;
    }
    .name{color:#111827; font-weight:700; letter-spacing:.15px}
    .sub{color:var(--muted); font-size:12px}
    .icons{display:flex; align-items:center; gap:8px}
    .icon-btn{
      width:36px; height:36px; display:grid; place-items:center; border-radius:10px; background:#fff; border:2px solid var(--border); color:#374151; cursor:pointer;
      transition: transform .1s ease, box-shadow .1s ease;
    }
    .icon-btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.08)}

    .level-badge{
      position:absolute; right:14px; top:54px; z-index:2; background:#fff; border:2px solid var(--border); color:#374151;
      padding:3px 8px; font-size:11px; border-radius:999px; letter-spacing:.3px
    }

    .xp{ position:relative; height:8px; margin:0 14px; background:#eceff1; border:2px solid var(--border); border-radius:999px; overflow:hidden; }
    .xp>span{ position:absolute; inset:0; width:52%; background:#9ca3af; }

    .messages{ height: calc(80svh - 56px - 68px);
      max-height:520px; overflow:auto; padding:16px 14px 10px; scroll-behavior:smooth; color:var(--ink);
      background: linear-gradient(180deg,#fff, #f7f7f7);
    }
    .msg{ display:flex; gap:6px; margin:8px 0; align-items:flex-end; }
    .msg.me{ flex-direction: row-reverse; }
    .bubble{$1border:2px solid var(--border);
    }
    @keyframes pop{ to{ transform: translateY(0); }}
    .me .bubble{ background: var(--bubble-me); color:#111827; box-shadow: 0 2px 6px rgba(0,0,0,.06)}
    .them .bubble{ background: var(--bubble-them); color:#111827; box-shadow: 0 2px 6px rgba(0,0,0,.05)}
    .meta{ font-size:11px; color: var(--muted); margin-top:4px }
    .stamp{ opacity:.9 }

    .input{
      display:flex; gap:10px; align-items:center; padding:10px 12px 14px; background:#f8fafc; border-top:2px solid var(--border)
    }
    .textbox{
      flex:1; display:flex; align-items:center; gap:8px; background:#fff; border:2px solid var(--border); border-radius:12px; padding:10px 12px;
    }
    .textbox input{ flex:1; background:transparent; color:#111827; outline:none; border:none; font-size:14px }
    .send{
      min-width:84px; padding:10px 14px; border:2px solid #d1d5db; border-radius:12px; color:#111827; cursor:pointer; font-weight:700; letter-spacing:.3px;
      background: linear-gradient(180deg,#f9fafb,#e5e7eb); box-shadow: 0 2px 8px rgba(0,0,0,.06);
      transition: transform .08s ease, filter .08s ease
    }
    .send:hover{ transform: translateY(-1px) }

    .typing{ display:none; align-items:center; gap:8px; color:#6b7280; font-size:13px; margin:8px 0 0 6px }
    .dots{ display:inline-flex; gap:3px }
    .dots span{ width:6px; height:6px; border-radius:50%; background:#9ca3af; opacity:.6; animation: blink 1s infinite ease-in-out }
    .dots span:nth-child(2){ animation-delay:.2s }
    .dots span:nth-child(3){ animation-delay:.4s }
    @keyframes blink{ 50%{ opacity:1 } }

    .tooltip{ position:absolute; top:48px; right:12px; background:#fff; border:2px solid var(--border); border-radius:10px; box-shadow: 0 10px 24px rgba(0,0,0,.08);
      display:none; min-width:180px; color:#111827 }
    .tooltip.show{ display:block }
    .tooltip .row{ display:flex; align-items:center; gap:10px; padding:10px 12px; cursor:pointer }
    .tooltip .row:hover{ background:#f3f4f6 }
    .tooltip svg{ color:#374151 }

    .phone.show, .calendar.show{ display:block }

    .icon-btn:focus-visible, .send:focus-visible, .textbox input:focus-visible{ outline: 2px solid #9ca3af; outline-offset: 2px }

    .pad{ height:18px }
  </style>
</head>
<body>
  <div class="chat-wrap">
    <div class="chat-card" role="application" aria-label="Chat window">
      <div class="header">
        <div class="tab" aria-label="Contact tab">
          <div class="avatar" aria-hidden="true">AS</div>
          <div>
            <div class="name">Ava Stone</div>
            <div class="sub">Online • Level 5</div>
          </div>
        </div>
        <div class="icons">
          <button class="icon-btn" id="phoneBtn" title="Call">
            <!-- phone icon -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M6.6 10.8a15 15 0 006.6 6.6l2.2-2.2a1 1 0 011-.24c1.1.37 2.29.56 3.6.56a1 1 0 011 1v3.2a1 1 0 01-1 1C11.2 21.72 2.28 12.8 2.28 2.6a1 1 0 011-1H6.4a1 1 0 011 1c0 1.31.19 2.5.56 3.6a1 1 0 01-.24 1l-2.12 2.6z" fill="currentColor"/>
            </svg>
          </button>
          <button class="icon-btn" id="calBtn" title="Schedule">
            <!-- calendar icon -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M7 2a1 1 0 011 1v1h8V3a1 1 0 112 0v1h1a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2h1V3a1 1 0 112 0v1zm13 7H4v10h16V9z" fill="currentColor"/>
            </svg>
          </button>
        </div>
        
      </div>

      

      <div class="messages" id="messages" aria-live="polite">
        <div class="msg them">
          <div class="avatar" aria-hidden="true">AS</div>
          <div>
            <div class="bubble">Welcome! Ready to quest for knowledge today?</div>
            <div class="meta"><span class="stamp">09:41</span> · <span>Lvl 5</span></div>
          </div>
        </div>
        <div class="msg me">
          <div class="avatar" aria-hidden="true">ME</div>
          <div>
            <div class="bubble">Absolutely! What are today’s challenges?</div>
            <div class="meta"><span class="stamp">09:42</span> · <span>Streak ×3</span></div>
          </div>
        </div>
        <div class="typing" id="typing"><strong>Ava</strong>
          <span class="dots" aria-hidden="true"><span></span><span></span><span></span></span>
        </div>
      </div>

      <div class="input">
        <div class="textbox">
          <!-- paper icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M21 15V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14l4-4h10a2 2 0 002-2z" fill="currentColor"/>
          </svg>
          <input id="input" type="text" placeholder="Type your message…" autocomplete="off" />
        </div>
        <button class="send" id="send">Send</button>
      </div>

      <!-- Action tooltips -->
      <div class="tooltip phone" id="phoneTip" role="dialog" aria-label="Phone menu">
        <div class="row" onclick="alert('Calling Ava…')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6.6 10.8a15 15 0 006.6 6.6l2.2-2.2a1 1 0 011-.24c1.1.37 2.29.56 3.6.56a1 1 0 011 1v3.2a1 1 0 01-1 1C11.2 21.72 2.28 12.8 2.28 2.6a1 1 0 011-1H6.4a1 1 0 011 1c0 1.31.19 2.5.56 3.6a1 1 0 01-.24 1l-2.12 2.6z" fill="currentColor"/></svg>
          <span>Start voice call</span>
        </div>
        <div class="row" onclick="alert('Sending voice note…')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 3a4 4 0 00-4 4v6a4 4 0 108 0V7a4 4 0 00-4-4zm-6 7a1 1 0 011 1v2a7 7 0 0014 0v-2a1 1 0 112 0v2a9 9 0 01-18 0v-2a1 1 0 011-1z" fill="currentColor"/></svg>
          <span>Send voice note</span>
        </div>
      </div>
      <div class="tooltip calendar" id="calTip" role="dialog" aria-label="Calendar menu">
        <div class="row" onclick="alert('Opening calendar…')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M7 2a1 1 0 011 1v1h8V3a1 1 0 112 0v1h1a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2h1V3a1 1 0 112 0v1zm13 7H4v10h16V9z" fill="currentColor"/></svg>
          <span>Create meeting</span>
        </div>
        <div class="row" onclick="alert('Sharing availability…')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 5a2 2 0 012-2h12a2 2 0 012 2v14l-4-3H6a2 2 0 01-2-2V5z" fill="currentColor"/></svg>
          <span>Share availability</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendBtn = document.getElementById('send');
    const typingEl = document.getElementById('typing');

    const phoneBtn = document.getElementById('phoneBtn');
    const calBtn = document.getElementById('calBtn');
    const phoneTip = document.getElementById('phoneTip');
    const calTip = document.getElementById('calTip');

    function toggleTip(tip){
      tip.classList.toggle('show');
      // Close the other tooltip if open
      if(tip === phoneTip) calTip.classList.remove('show');
      if(tip === calTip) phoneTip.classList.remove('show');
    }
    phoneBtn.addEventListener('click', ()=> toggleTip(phoneTip));
    calBtn.addEventListener('click', ()=> toggleTip(calTip));
    document.addEventListener('click', (e)=>{
      if(!e.target.closest('.icon-btn') && !e.target.closest('.tooltip')){
        phoneTip.classList.remove('show');
        calTip.classList.remove('show');
      }
    });

    function addMessage(text, who='me'){
      const wrap = document.createElement('div');
      wrap.className = `msg ${who}`;
      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = who === 'me' ? 'ME' : 'AS';
      const box = document.createElement('div');
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.textContent = text;
      const meta = document.createElement('div');
      meta.className = 'meta';
      const now = new Date();
      const hh = now.getHours().toString().padStart(2,'0');
      const mm = now.getMinutes().toString().padStart(2,'0');
      meta.innerHTML = `<span class="stamp">${hh}:${mm}</span> · <span>${who==='me'?'Streak ×3':'Lvl 5'}</span>`;
      box.appendChild(bubble); box.appendChild(meta);
      wrap.appendChild(avatar); wrap.appendChild(box);
      messagesEl.appendChild(wrap);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function botReply(userText){
      const replies = [
        "Nice! Claim +10 XP for curiosity.",
        "Challenge accepted. Ready for a mini boss?",
        "Pro tip: use combos — ask, test, iterate.",
        "That unlocks a new hint. Want it?",
        "Sweet! Adding this to your quest log."
      ];
      const pick = replies[Math.floor(Math.random()*replies.length)];
      typingEl.style.display = 'flex';
      messagesEl.scrollTop = messagesEl.scrollHeight;
      setTimeout(()=>{
        typingEl.style.display = 'none';
        addMessage(pick, 'them');
      }, 700 + Math.random()*600);
    }

    function handleSend(){
      const val = inputEl.value.trim();
      if(!val) return;
      addMessage(val, 'me');
      inputEl.value = '';
      botReply(val);
    }

    inputEl.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); handleSend(); }
    });
    sendBtn.addEventListener('click', handleSend);

    // Accessibility: announce new messages
    const observer = new MutationObserver(()=>{
      messagesEl.setAttribute('aria-live','polite');
    });
    observer.observe(messagesEl, { childList:true });
  </script>
</body>
</html>
